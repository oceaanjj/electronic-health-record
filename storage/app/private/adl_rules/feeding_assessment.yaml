feeding_assessment:
  # --- CRITICAL - Life-Threatening Events (Leveraging Exact Phrase Matching) ---

  # Rule: F-CRIT-001 - Acute Airway Obstruction
  - rule_id: F-CRIT-001
    # Keywords that must be present and will trigger the high-confidence match
    keywords:
      - "choking"
      - "turning blue"
      - "cyanotic during feed"
      - "gagging and blue"
      - "cannot breathe"
    alert: "CRITICAL: Patient is choking and showing signs of cyanosis. Initiate emergency response (suction/BLS) and notify provider STAT."
    severity: "critical"

  # Rule: F-CRIT-002 - Aspiration/Respiratory Compromise
  - rule_id: F-CRIT-002
    keywords:
      - "aspirating"
      - "audible aspiration"
      - "wet vocal quality after feeds"
      - "SaO2 drop with liquids"
      - "desaturation during feed"
    alert: "CRITICAL: Aspiration strongly suspected/confirmed (wet voice, desaturation). Stop feed immediately, suction, maintain NPO, and notify provider/SLP urgently."
    severity: "critical"

  # Rule: F-CRIT-003 - Gastrointestinal Emergency
  - rule_id: F-CRIT-003
    keywords:
      - "bilious vomit"
      - "green emesis"
      - "projectile vomiting"
      - "dislodged g-tube"
      - "hematemesis"
    alert: "CRITICAL: GI emergency (bilious/projectile vomit or dislodged tube). Hold all feeds (NPO), notify surgical team immediately for evaluation."
    severity: "critical"

  # --- WARNING - High-Risk Clinical Findings ---

  # Rule: F-WARN-010 - Swallowing/Oral Motor Dysfunction
  - rule_id: F-WARN-010
    keywords:
      - "coughing with feeds"
      - "gagging on solids"
      - "pocketing food"
      - "difficulty chewing"
      - "swallows food whole"
    alert: "WARNING: Signs of poor oral-motor function/coordination (coughing, pocketing). Implement aspiration precautions and urgently refer to Speech/Feeding Therapy."
    severity: "warning"

  # Rule: F-WARN-011 - Feeding Intolerance / Volume Issues
  - rule_id: F-WARN-011
    keywords:
      - "high gastric residuals"
      - "vomiting with g-tube"
      - "emesis with tube feeds"
      - "abdominal distention after feeds"
      - "clogged g-tube"
    alert: "WARNING: Feed intolerance (high residuals/vomiting). Hold feed, assess tube patency/placement, and notify provider/dietician for rate adjustment."
    severity: "warning"

  # Rule: F-WARN-012 - Behavioral / Safety (Teenager)
  - rule_id: F-WARN-012
    keywords:
      - "teenager restricting intake"
      - "body image concerns"
      - "fear of gaining weight"
    alert: "WARNING: Red flag for potential eating disorder (restriction/body image). Requires sensitive, multidisciplinary evaluation (Provider, Psychology)."
    severity: "critical" # Elevated to critical due to eating disorder risk

  # --- INFO - Monitoring / Mild Behavioral Issues ---

  # Rule: F-INFO-020 - Common Behavioral/Developmental Issues
  - rule_id: F-INFO-020
    keywords:
      - "picky eater"
      - "food selectivity"
      - "food jag"
      - "refuses new foods"
      - "grazing all day"
    alert: "INFO: Common behavioral feeding issues noted. Advise consistent, low-pressure meal environment. Monitor growth, consider Dietician consult if persistent."
    severity: "info"

  # Rule: F-INFO-021 - Site Maintenance
  - rule_id: F-INFO-021
    keywords:
      - "g-tube site red"
      - "g-tube site leaking"
      - "granulation tissue"
      - "skin breakdown on nares"
    alert: "INFO: Mild G-tube site or NG-tube nares irritation/leakage. Clean per protocol and escalate to provider/wound care if worsens."
    severity: "info"

  # --- Negation-Safe "Normal" Rule (Should match only if nothing else matches with high confidence) ---

  # Rule: F-NONE-099 - Normal Findings / No Concerns
  # The rule is scored low, so it will be overridden by any other match.
  - rule_id: F-NONE-099
    keywords:
      - "normal"
      - "no concerns"
      - "eats well"
      - "good appetite"
      - "tolerating feeds"
    alert: "Normal Findings / No Clinical Alert Detected"
    severity: "none"
