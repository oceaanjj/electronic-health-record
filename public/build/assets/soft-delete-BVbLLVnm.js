document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(n){const e=n.target.closest(".js-toggle-patient-status");if(!e)return;n.preventDefault();const o=e.dataset.patientId,c=e.dataset.action,s=c==="activate",r=s?`/patients/${o}/recover`:`/patients/${o}`,i=document.querySelector('meta[name="csrf-token"]').getAttribute("content");console.log(`Button clicked! Action: ${c}, Patient ID: ${o}`),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":i,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({_method:s?"POST":"DELETE"})}).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Response from server:",t),t.success?(console.log("Action successful, reloading page to reflect changes."),window.location.reload()):console.error("Action failed:",t.message||"No error message provided.")}).catch(t=>{console.error("Fetch error:",t)})})});
